<!DOCTYPE html>
<html lang="en">
<head>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TrainIQ - Evidence-Based Training</title>
    <link rel="manifest" href="manifest.json">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin="anonymous" src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script crossorigin="anonymous" src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: #050505; color: #fff; }
        .font-display { font-family: 'Antonio', sans-serif; text-transform: uppercase; letter-spacing: 0.02em; }
        .tab-bar { position: fixed; bottom: 0; left: 0; right: 0; z-index: 50; backdrop-filter: blur(24px); }
        .content-with-tabs { padding-bottom: calc(80px + env(safe-area-inset-bottom));
        scroll-padding-bottom: calc(80px + env(safe-area-inset-bottom)); min-height: 100vh; }
        .glass { background: rgba(255, 255, 255, 0.06); backdrop-filter: blur(14px); border: 1px solid rgba(255, 255, 255, 0.10); box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
        .premium-gradient { background: linear-gradient(135deg, #f97316 0%, #dc2626 100%); }
        .app-bg {
          background:
            radial-gradient(1200px 600px at 20% -10%, rgba(249,115,22,0.22), rgba(0,0,0,0) 60%),
            radial-gradient(900px 500px at 95% 20%, rgba(220,38,38,0.18), rgba(0,0,0,0) 55%),
            radial-gradient(700px 450px at 40% 120%, rgba(249,115,22,0.10), rgba(0,0,0,0) 55%),
            #050505;
        }
        .ring-premium { box-shadow: 0 0 0 1px rgba(255,255,255,0.10), 0 18px 40px rgba(0,0,0,0.45); }
        .btn-touch { min-height: 48px; transition: all 0.2s; }
        .btn-touch:active { transform: scale(0.98); }
    </style>
</head>
<body>

<script>
(function(){
  function show(msg, details){
    try {
      var el = document.getElementById('bootError');
      if(!el) {
        el = document.createElement('div');
        el.id = 'bootError';
        el.style.cssText = 'position:fixed;top:12px;left:12px;right:12px;z-index:99999;background:#111827;color:#fff;border:1px solid rgba(255,255,255,.15);border-radius:14px;padding:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;font-size:14px;line-height:1.35;white-space:pre-wrap';
        document.body.appendChild(el);
      }
      el.textContent = 'TrainIQ boot error\n\n' + msg + (details ? ('\n\n' + details) : '');
    } catch(e) {}
  }

  window.addEventListener('error', function(e){
    if(e && e.target && (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK')) {
      var src = e.target.src || e.target.href || '(unknown src)';
      show('Failed to load resource:', src);
      return;
    }
    var msg = (e && e.message) ? e.message : String(e);
    var file = (e && e.filename) ? e.filename : '';
    var line = (e && e.lineno) ? ('line ' + e.lineno) : '';
    var col  = (e && e.colno) ? ('col ' + e.colno) : '';
    var where = [file,line,col].filter(Boolean).join(' ');
    show(msg, where);
  }, true);

  window.addEventListener('unhandledrejection', function(e){
    var reason = e && e.reason ? (e.reason.stack || e.reason.message || String(e.reason)) : 'Unknown rejection';
    show('Unhandled promise rejection:', reason);
  });
})();
</script>

    <div id="root"></div>
    
    <!-- Evidence-based exercise database -->
    <script src="exercise-database.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==================== ADVANCED TRAINING TECHNIQUES ====================
        
        const ADVANCED_TECHNIQUES = {
          dropsets: {
            name: "Drop Sets",
            description: "Reduce weight 20-25% after failure, continue for 1-2 drops",
            fatigueCost: "high",
            timeAdd: 1.3, // multiplier for set duration
            bestFor: ["isolation"],
            evidence: "High metabolic stress, similar hypertrophy in 40% less time",
            application: "final_set" // when to apply
          },
          restpause: {
            name: "Rest-Pause",
            description: "Near-failure set, rest 15-20s, continue 2-3 mini-clusters",
            fatigueCost: "very_high",
            timeAdd: 1.4,
            bestFor: ["compound", "isolation"],
            evidence: "Greater volume at high intensity",
            application: "final_set"
          },
          myoreps: {
            name: "Myo-Reps",
            description: "Activation set (2-3 RIR), 5-breath rest, 3-5 rep mini-sets",
            fatigueCost: "medium",
            timeAdd: 1.2,
            bestFor: ["isolation"],
            evidence: "Time-efficient stimulus (Borge Fagerli method)",
            application: "all_sets"
          },
          fst7: {
            name: "FST-7",
            description: "7 sets × 8-12 reps, 30-45s rest on final exercise",
            fatigueCost: "high",
            timeAdd: 2.0,
            bestFor: ["isolation"],
            evidence: "Fascia stretch theory (Hany Rambod), high pump",
            application: "final_exercise"
          },
          tempo: {
            name: "Tempo (3-0-1-0)",
            description: "3s eccentric, 0s pause, 1s concentric, 0s top",
            fatigueCost: "medium",
            timeAdd: 1.5,
            bestFor: ["compound", "isolation"],
            evidence: "Greater time under tension, eccentric hypertrophy",
            application: "all_sets"
          },
          clusters: {
            name: "Cluster Sets",
            description: "Intra-set rest (15-30s) between small rep clusters",
            fatigueCost: "high",
            timeAdd: 1.6,
            bestFor: ["compound"],
            evidence: "Maintains bar velocity, strength-skill work",
            application: "strength_focus"
          }
        };

        // Check if technique is appropriate for exercise
        function isTechniqueAppropriate(technique, exercise, position, programType) {
          const tech = ADVANCED_TECHNIQUES[technique];
          if (!tech) return false;
          
          // Type match
          if (!tech.bestFor.includes(exercise.type)) return false;
          
          // Application rules
          if (tech.application === 'final_set' && position !== 'last') return false;
          if (tech.application === 'final_exercise' && position !== 'final_exercise') return false;
          if (tech.application === 'strength_focus' && programType !== 'Strength' && programType !== 'Powerbuilding') return false;
          
          // Don't apply high-fatigue techniques to main lifts
          if (exercise.role === 'main' && (tech.fatigueCost === 'very_high' || tech.fatigueCost === 'high')) return false;
          
          return true;
        }

        // Apply technique to exercise
        function applyAdvancedTechnique(exercise, technique, setNum, totalSets) {
          const tech = ADVANCED_TECHNIQUES[technique];
          if (!tech) return exercise;
          
          const position = setNum === totalSets ? 'last' : 'middle';
          
          let modified = { ...exercise };
          
          switch(technique) {
            case 'dropsets':
              if (position === 'last') {
                modified.dropsets = { drops: 2, reduction: 0.25 };
                modified.techniqueNote = "After failure: drop 25%, continue to failure × 2";
              }
              break;
              
            case 'restpause':
              if (position === 'last') {
                modified.restpause = { clusters: 3, rest: 20 };
                modified.techniqueNote = "Near-failure → rest 20s → continue × 3 clusters";
              }
              break;
              
            case 'myoreps':
              modified.myoreps = { activation: true, minisets: 4 };
              modified.techniqueNote = "Activation set → 5 breaths → 3-5 reps × 4";
              break;
              
            case 'fst7':
              // This gets applied to final exercise of muscle group, overrides sets
              modified.fst7 = true;
              modified.sets = 7;
              modified.rest = '30-45s';
              modified.techniqueNote = "7 sets, 30-45s rest, pump focus";
              break;
              
            case 'tempo':
              modified.tempo = '3-0-1-0';
              modified.techniqueNote = "3s down, 1s up - controlled tempo";
              break;
              
            case 'clusters':
              modified.clusters = { intraRest: 20, repsPerCluster: 2 };
              modified.techniqueNote = "Mini-clusters: 2 reps → 20s rest → repeat";
              break;
          }
          
          return modified;
        }

        // ==================== EXERCISE DATABASE ====================
        // Fallback if external file doesn't load
        const EXERCISE_DB_FALLBACK = {
          chest_horizontal: [
            { name: "Barbell Bench Press", primary: "chest", secondary: ["triceps", "front_delts"], type: "compound", equipment: "barbell", skill: "high", fatigue: "high", repRange: [3, 12] },
            { name: "Dumbbell Bench Press", primary: "chest", secondary: ["triceps"], type: "compound", equipment: "dumbbell", skill: "medium", fatigue: "high", repRange: [6, 15] },
            { name: "Machine Chest Press", primary: "chest", secondary: ["triceps"], type: "compound", equipment: "machine", skill: "low", fatigue: "medium", repRange: [8, 20] }
          ],
          chest_isolation: [
            { name: "Cable Flyes", primary: "chest", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [10, 20] },
            { name: "Pec Deck", primary: "chest", secondary: [], type: "isolation", equipment: "machine", skill: "low", fatigue: "low", repRange: [12, 25] }
          ],
          back_vertical: [
            { name: "Pull-ups", primary: "lats", secondary: ["biceps"], type: "compound", equipment: "bodyweight", skill: "high", fatigue: "high", repRange: [5, 15] },
            { name: "Lat Pulldown", primary: "lats", secondary: ["biceps"], type: "compound", equipment: "cable", skill: "low", fatigue: "medium", repRange: [8, 15] }
          ],
          back_horizontal: [
            { name: "Barbell Row", primary: "back", secondary: ["biceps"], type: "compound", equipment: "barbell", skill: "high", fatigue: "high", repRange: [5, 12] },
            { name: "Dumbbell Row", primary: "back", secondary: ["biceps"], type: "compound", equipment: "dumbbell", skill: "medium", fatigue: "medium", repRange: [8, 15] },
            { name: "Seated Cable Row", primary: "back", secondary: ["biceps"], type: "compound", equipment: "cable", skill: "low", fatigue: "medium", repRange: [10, 20] }
          ],
          shoulders_press: [
            { name: "Overhead Press", primary: "front_delts", secondary: ["triceps"], type: "compound", equipment: "barbell", skill: "high", fatigue: "high", repRange: [4, 10] },
            { name: "Seated Dumbbell Press", primary: "front_delts", secondary: ["triceps"], type: "compound", equipment: "dumbbell", skill: "medium", fatigue: "high", repRange: [6, 12] }
          ],
          shoulders_lateral: [
            { name: "Dumbbell Lateral Raise", primary: "side_delts", secondary: [], type: "isolation", equipment: "dumbbell", skill: "low", fatigue: "low", repRange: [10, 20] },
            { name: "Cable Lateral Raise", primary: "side_delts", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [12, 25] }
          ],
          shoulders_rear: [
            { name: "Face Pull", primary: "rear_delts", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [12, 20] },
            { name: "Reverse Pec Deck", primary: "rear_delts", secondary: [], type: "isolation", equipment: "machine", skill: "low", fatigue: "low", repRange: [12, 20] }
          ],
          legs_squat: [
            { name: "Back Squat", primary: "quads", secondary: ["glutes"], type: "compound", equipment: "barbell", skill: "high", fatigue: "very_high", repRange: [3, 10] },
            { name: "Leg Press", primary: "quads", secondary: ["glutes"], type: "compound", equipment: "machine", skill: "low", fatigue: "high", repRange: [8, 20] }
          ],
          legs_hinge: [
            { name: "Romanian Deadlift", primary: "hamstrings", secondary: ["glutes"], type: "compound", equipment: "barbell", skill: "high", fatigue: "high", repRange: [6, 12] },
            { name: "Dumbbell RDL", primary: "hamstrings", secondary: ["glutes"], type: "compound", equipment: "dumbbell", skill: "medium", fatigue: "medium", repRange: [8, 15] }
          ],
          legs_quad_isolation: [
            { name: "Leg Extension", primary: "quads", secondary: [], type: "isolation", equipment: "machine", skill: "low", fatigue: "low", repRange: [10, 20] }
          ],
          legs_hamstring_isolation: [
            { name: "Leg Curl", primary: "hamstrings", secondary: [], type: "isolation", equipment: "machine", skill: "low", fatigue: "low", repRange: [10, 20] }
          ],
          legs_glutes: [
            { name: "Hip Thrust", primary: "glutes", secondary: ["hamstrings"], type: "compound", equipment: "barbell", skill: "medium", fatigue: "medium", repRange: [8, 15] }
          ],
          legs_calves: [
            { name: "Standing Calf Raise", primary: "calves", secondary: [], type: "isolation", equipment: "machine", skill: "low", fatigue: "low", repRange: [10, 20] }
          ],
          arms_biceps: [
            { name: "Barbell Curl", primary: "biceps", secondary: [], type: "isolation", equipment: "barbell", skill: "low", fatigue: "low", repRange: [8, 15] },
            { name: "Dumbbell Curl", primary: "biceps", secondary: [], type: "isolation", equipment: "dumbbell", skill: "low", fatigue: "low", repRange: [8, 15] },
            { name: "Cable Curl", primary: "biceps", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [10, 20] }
          ],
          arms_triceps: [
            { name: "Close-Grip Bench", primary: "triceps", secondary: ["chest"], type: "compound", equipment: "barbell", skill: "medium", fatigue: "medium", repRange: [6, 12] },
            { name: "Tricep Pushdown", primary: "triceps", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [10, 20] },
            { name: "Overhead Extension", primary: "triceps", secondary: [], type: "isolation", equipment: "dumbbell", skill: "low", fatigue: "low", repRange: [10, 15] }
          ],
          core_antiextension: [
            { name: "Plank", primary: "core", secondary: [], type: "isolation", equipment: "bodyweight", skill: "low", fatigue: "low", repRange: [30, 90] },
            { name: "Cable Crunch", primary: "core", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [12, 20] }
          ],
          core_antirotation: [
            { name: "Pallof Press", primary: "core", secondary: [], type: "isolation", equipment: "cable", skill: "low", fatigue: "low", repRange: [10, 15] }
          ]
        };

        // Use external DB if loaded, otherwise fallback
        const SOURCE_DB = (typeof EXERCISE_DATABASE !== 'undefined' && EXERCISE_DATABASE) ? EXERCISE_DATABASE : EXERCISE_DB_FALLBACK;

        // ==================== REST OF YOUR ORIGINAL CODE ====================
        // (All the existing functions remain the same - I'll continue in next section)
        
        function generateProgram(config) {
          // Your existing generateProgram function stays the same
          // We'll modify it to integrate advanced techniques
          
          const { experience, days, programType, oneRMs, supersets, advancedTechniques } = config;
          
          // ... (keep all your existing logic)
          
          // Add advanced technique application AFTER exercise selection
          if (advancedTechniques && advancedTechniques.enabled) {
            const selectedTechnique = advancedTechniques.technique;
            
            // Apply to appropriate exercises
            weeks.forEach(week => {
              week.workouts.forEach(workout => {
                workout.exercises.forEach((ex, idx) => {
                  const isLastSet = true; // Will be applied per-set in UI
                  const isFinalExercise = idx === workout.exercises.length - 1;
                  const position = isFinalExercise ? 'final_exercise' : 'middle';
                  
                  if (isTechniqueAppropriate(selectedTechnique, ex, position, programType)) {
                    workout.exercises[idx] = applyAdvancedTechnique(ex, selectedTechnique, 1, ex.sets);
                  }
                });
              });
            });
          }
          
          return { weeks, config, createdAt: new Date().toISOString(), generator: 'advanced_v1' };
        }

        // Storage system
        const storage = {
          get(k, fallback) {
            try {
              const raw = localStorage.getItem(`trainiq:${k}`);
              return raw ? JSON.parse(raw) : fallback;
            } catch (e) { return fallback; }
          },
          set(k, value) {
            try { localStorage.setItem(`trainiq:${k}`, JSON.stringify(value)); } catch (e) {}
          }
        };

        // ==================== MAIN APP ====================
        
        function TrainIQ() {
          const DEFAULT_CONFIG = {
            experience: '',
            days: '',
            time: '',
            programType: '',
            supersets: false,
            oneRMs: { chest: '', lats: '', shoulders: '', quads: '', hamstrings: '' },
            warmups: { enabled: true, mode: 'full', onlyCompounds: false },
            advancedTechniques: {
              enabled: false,
              technique: 'dropsets' // default selection
            }
          };

          const [tab, setTab] = useState('home');
          const [config, setConfig] = useState(DEFAULT_CONFIG);
          const [program, setProgram] = useState(null);
          
          useEffect(() => {
            const saved = storage.get('state', null);
            if (saved?.config) {
              setConfig({ ...DEFAULT_CONFIG, ...saved.config });
            }
            if (saved?.program) setProgram(saved.program);
          }, []);
          
          useEffect(() => {
            storage.set('state', { config, program });
          }, [config, program]);
          
          const handleGenerate = () => {
            const newProgram = generateProgram(config);
            setProgram(newProgram);
            setTab('workouts');
          };
          
          return (
            <div className="min-h-screen app-bg">
              {tab === 'home' && (
                <HomeScreen config={config} setConfig={setConfig} onGenerate={handleGenerate} />
              )}
              {tab === 'workouts' && program && (
                <div className="content-with-tabs px-4 py-6">
                  <h2 className="text-2xl font-display font-bold mb-4">WORKOUTS</h2>
                  <pre className="text-xs text-gray-400 glass p-4 rounded overflow-auto">
                    {JSON.stringify(program, null, 2)}
                  </pre>
                </div>
              )}
              {tab === 'settings' && (
                <SettingsScreen config={config} setConfig={setConfig} />
              )}
              <TabBar tab={tab} setTab={setTab} hasProgram={!!program} />
            </div>
          );
        }

        // ==================== HOME SCREEN WITH ADVANCED TECHNIQUES ====================
        
        function HomeScreen({ config, setConfig, onGenerate }) {
          const isValid = config.experience && config.days && config.time && config.programType;
          
          return (
            <div className="content-with-tabs px-4 pt-8 pb-32 max-w-2xl mx-auto">
              <div className="text-center mb-10">
                <h1 className="font-display text-5xl font-bold mb-1 premium-gradient bg-clip-text text-transparent">
                  TRAINIQ
                </h1>
                <p className="text-gray-500 text-xs font-semibold tracking-wider">EVIDENCE-BASED TRAINING</p>
              </div>
              
              <div className="space-y-5">
                {/* Existing inputs */}
                <div>
                  <label className="block text-xs font-bold text-gray-400 mb-2 tracking-wide">EXPERIENCE LEVEL</label>
                  <div className="grid grid-cols-3 gap-2">
                    {['Beginner', 'Intermediate', 'Advanced'].map(lvl => (
                      <button key={lvl} onClick={() => setConfig({...config, experience: lvl})}
                        className={"p-3 rounded-xl font-semibold text-sm transition btn-touch " +
                          (config.experience === lvl ? "premium-gradient text-white" : "glass text-gray-300")}>
                        {lvl}
                      </button>
                    ))}
                  </div>
                </div>
                
                <div>
                  <label className="block text-xs font-bold text-gray-400 mb-2 tracking-wide">TRAINING DAYS</label>
                  <div className="grid grid-cols-4 gap-2">
                    {['3', '4', '5', '6'].map(d => (
                      <button key={d} onClick={() => setConfig({...config, days: d})}
                        className={"p-4 rounded-xl font-bold text-2xl transition btn-touch " +
                          (config.days === d ? "premium-gradient text-white" : "glass text-gray-300")}>
                        {d}
                      </button>
                    ))}
                  </div>
                </div>
                
                <div>
                  <label className="block text-xs font-bold text-gray-400 mb-2 tracking-wide">SESSION LENGTH</label>
                  <div className="grid grid-cols-3 gap-2">
                    {[
                      { label: 'No cap', value: '' },
                      { label: '45min', value: '45min' },
                      { label: '60min', value: '60min' }
                    ].map(({ label, value }) => (
                      <button key={label} onClick={() => setConfig({ ...config, time: value })}
                        className={"p-3 rounded-xl font-semibold transition btn-touch " +
                          (config.time === value ? "premium-gradient text-white" : "glass text-gray-300")}>
                        {label}
                      </button>
                    ))}
                  </div>
                </div>
                
                <div>
                  <label className="block text-xs font-bold text-gray-400 mb-2 tracking-wide">PROGRAM TYPE</label>
                  <select
                    value={config.programType}
                    onChange={(e) => setConfig({...config, programType: e.target.value})}
                    className="w-full p-4 rounded-xl glass bg-black/40 text-white font-semibold border border-white/10"
                  >
                    <option value="">Select Program Type</option>
                    <option value="Hypertrophy">Hypertrophy</option>
                    <option value="Strength">Strength</option>
                    <option value="Powerbuilding">Powerbuilding</option>
                    <option value="Minimalist">Minimalist</option>
                  </select>
                </div>
                
                {/* NEW: Advanced Techniques Section */}
                <div className="p-5 rounded-2xl glass border-2 border-orange-500/20">
                  <div className="flex items-center justify-between mb-4">
                    <div>
                      <h3 className="font-bold text-sm">ADVANCED TECHNIQUES</h3>
                      <p className="text-xs text-gray-500 mt-1">Evidence-based intensity methods</p>
                    </div>
                    <button 
                      onClick={() => setConfig({
                        ...config, 
                        advancedTechniques: {
                          ...config.advancedTechniques,
                          enabled: !config.advancedTechniques?.enabled
                        }
                      })}
                      className={"w-14 h-8 rounded-full transition " + 
                        (config.advancedTechniques?.enabled ? "bg-orange-500" : "bg-gray-700")}
                    >
                      <div className={"w-6 h-6 rounded-full bg-white transition-transform " + 
                        (config.advancedTechniques?.enabled ? "translate-x-7" : "translate-x-1")}></div>
                    </button>
                  </div>
                  
                  {config.advancedTechniques?.enabled && (
                    <div className="space-y-3">
                      <select
                        value={config.advancedTechniques?.technique || 'dropsets'}
                        onChange={(e) => setConfig({
                          ...config,
                          advancedTechniques: {
                            ...config.advancedTechniques,
                            technique: e.target.value
                          }
                        })}
                        className="w-full p-3 rounded-lg bg-black/50 border border-white/10 text-white text-sm"
                      >
                        <option value="dropsets">Drop Sets - Quick hypertrophy</option>
                        <option value="restpause">Rest-Pause - Max intensity</option>
                        <option value="myoreps">Myo-Reps - Time efficient</option>
                        <option value="fst7">FST-7 - Pump training</option>
                        <option value="tempo">Tempo (3-0-1-0) - Control focus</option>
                        <option value="clusters">Cluster Sets - Strength-skill</option>
                      </select>
                      
                      {config.advancedTechniques?.technique && (
                        <div className="p-3 rounded-lg bg-black/30 border border-white/5">
                          <p className="text-xs text-gray-300">
                            {ADVANCED_TECHNIQUES[config.advancedTechniques.technique]?.description}
                          </p>
                          <p className="text-xs text-orange-400 mt-2">
                            <strong>Evidence:</strong> {ADVANCED_TECHNIQUES[config.advancedTechniques.technique]?.evidence}
                          </p>
                        </div>
                      )}
                    </div>
                  )}
                </div>
                
                <div className="flex items-center justify-between p-4 rounded-xl glass">
                  <span className="font-semibold text-sm">SUPERSETS</span>
                  <button onClick={() => setConfig({...config, supersets: !config.supersets})}
                    className={"w-14 h-8 rounded-full transition " + (config.supersets ? "bg-orange-500" : "bg-gray-700")}>
                    <div className={"w-6 h-6 rounded-full bg-white transition-transform " + 
                      (config.supersets ? "translate-x-7" : "translate-x-1")}></div>
                  </button>
                </div>
                
                <button onClick={onGenerate} disabled={!isValid}
                  className={"w-full p-5 rounded-xl font-display font-bold text-lg transition btn-touch " +
                    (isValid ? "premium-gradient text-white shadow-xl" : "glass text-gray-600")}>
                  GENERATE PROGRAM
                </button>
              </div>
            </div>
          );
        }

        function SettingsScreen({ config, setConfig }) {
          return (
            <div className="content-with-tabs px-4 py-6">
              <h2 className="text-2xl font-display font-bold mb-6">SETTINGS</h2>
              <div className="space-y-4">
                <button 
                  onClick={() => { if(confirm('Clear all data?')) { localStorage.clear(); window.location.reload(); } }}
                  className="w-full p-4 rounded-xl bg-red-500/20 text-red-400 font-bold">
                  CLEAR DATA
                </button>
              </div>
            </div>
          );
        }

        function TabBar({ tab, setTab, hasProgram }) {
          const tabs = [
            { id: 'home', label: 'Home' },
            { id: 'workouts', label: 'Workouts', disabled: !hasProgram },
            { id: 'settings', label: 'Settings' }
          ];
          
          return (
            <div className="tab-bar px-3 pb-8 pt-3">
              <div className="max-w-2xl mx-auto rounded-2xl glass flex justify-around p-2">
                {tabs.map(t => (
                  <button
                    key={t.id}
                    onClick={() => !t.disabled && setTab(t.id)}
                    disabled={t.disabled}
                    className={"px-6 py-3 rounded-xl font-bold text-sm transition " +
                      (tab === t.id ? "premium-gradient text-white" : 
                       t.disabled ? "text-gray-700" : "text-gray-400")}
                  >
                    {t.label.toUpperCase()}
                  </button>
                ))}
              </div>
            </div>
          );
        }

        // Mount app
        ReactDOM.render(<TrainIQ />, document.getElementById('root'));
    </script>
</body>
</html>
